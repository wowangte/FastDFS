
一、安装依赖的环境
  gcc --version 检查是否安装gcc
  c++ --version 检查是否安装c++
  yum -y install gcc-c++
二、下载安装包
  cd /usr/local
  mkdir fastdfs
  cd fastdfs
  // 跟教程版本一致
  wget https://github.com/happyfish100/libfastcommon/archive/V1.0.7.tar.gz
  wget https://github.com/happyfish100/fastdfs/archive/V5.05.tar.gz
  wget http://jaist.dl.sourceforge.NET/project/fastdfs/FastDFS%20Nginx%20Module%20Source%20Code/fastdfs-nginx-module_v1.16.tar.gz
  wget http://nginx.org/download/nginx-1.8.1.tar.gz
  
  // 其他版本
  wget https://github.com/happyfish100/libfastcommon/archive/V1.0.39.tar.gz
  wget https://github.com/happyfish100/fastdfs/archive/V5.11.tar.gz
  wget https://github.com/happyfish100/fastdfs-nginx-module/archive/V1.20.tar.gz
  wget http://nginx.org/download/nginx-1.12.2.tar.gz
三、安装libfastcommon
  tar -zxf libfastcommon*.tar.gz
  cd libfastcommon-1.0.7
  ./make.sh
    (./make.sh报错：yum -y install zlib zlib-devel pcre pcre-devel openssl openssl-devel libevent libevent-devel perl unzip net-tools)
  ./make.sh install
    （mkdir -p /usr/lib64
      install -m 755 libfastcommon.so /usr/lib64
      mkdir -p /usr/include/fastcommon
      install -m 644 common_define.h hash.h * /usr/include/fastcommon）
  cd /usr/lib64/
  cp libfastcommon.so /usr/lib/
  find /usr/lib/ -name libfastcommon.so
四、安装fastdfs
  cd /usr/local/fastdfs/
  tar -zxf fastdfs*.tar.gz
  cd fastdfs-5.05
  ./make.sh
  ./make.sh install
  cd conf/
  cp * /etc/fdfs/
  （1）.安装Tracker服务
  cd ..
  mkdir tracker_data
  cd tracker_data
  pwd
  /usr/local/fastdfs/fastdfs-5.05/tracker_data
  vim /etc/fdfs/tracker.conf
  修改：base_path=/usr/local/fastdfs/fastdfs-5.05/tracker_data
  保存退出：wq
  // 启动或重启Tracker
  /usr/bin/fdfs_trackerd /etc/fdfs/tracker.conf
  /usr/bin/fdfs_trackerd /etc/fdfs/tracker.conf restart
  （2）.安装Storage服务
  cd ..
  mkdir storage_data
  cd storage_data
  pwd
  /usr/local/fastdfs/fastdfs-5.05/storage_data
  vim /etc/fdfs/storage.conf
  修改：base_path=/usr/local/fastdfs/fastdfs-5.05/storage_data
        store_path0=/usr/local/fastdfs/fastdfs-5.05/storage_data
        tracker_server=192.168.*.***:22122
  保存退出：wq
  // 启动Storage
  /usr/bin/fdfs_storaged /etc/fdfs/storage.conf
  （3）.配置客户端
  cd /usr/local/fastdfs/fastdfs-5.05/client/
  cp libfdfsclient.so /usr/lib/
  cd /usr/local/fastdfs/fastdfs-5.05/
  mkdir client_data
  cd client_data
  pwd
  /usr/local/fastdfs/fastdfs-5.05/client_data
  vim /etc/fdfs/client.conf
  修改：base_path=/usr/local/fastdfs/fastdfs-5.05/client_data
        tracker_server=192.168.*.***:22122
  保存退出：wq
  // 测试本地上传文件
  vim /root/hi.html
  编写：hello,fastdfs!
  /usr/bin/fdfs_test /etc/fdfs/client.conf upload /root/hi.html
五、将防火墙换成iptables
    systemctl stop firewalld
    systemctl mask firewalld
    yum install iptables-services
    systemctl enable iptables
    systemctl start iptables
    service iptables save
六、开放端口
    vim /etc/sysconfig/iptables
    修改：新增要开发的端口
    service iptables restart
七、安装nginx和nginx的fastdfs插件
    （1）配置插件
    cd fastdfs-nginx-module
    cd src
    vim config
    shift: --> %s/local\///g
    推出：wq
    cp mod_fastdfs.conf /etc/fdfs/
    vim /etc/fdfs/mod_fastdfs.conf
    修改：tracker_server=192.168.*.***:22122
          url_have_group_name = true
          store_path0=/usr/local/fastdfs/fastdfs-5.05/storage_data
    推出：wq   
    （2）安装插件
    cd /usr/local/fastdfs/
    cd nginx-1.8.1
    ./configure --add-module=/usr/local/fastdfs/fastdfs-nginx-module/src
    （3）安装nginx
    make
    make install
    （4）配置nginx
    cd /usr/local/nginx/
    cd conf/
    vim nginx.conf
    修改：在server {}中添加下面内容
        location /group1/M00/ {
            ngx_fastdfs_module;
        }
    推出：wq
    （5）启动nginx
    cd /usr/local/nginx/sbin
    ./ningx
    ps -aux | grep nginx
    
    
  
  
  
  
  
